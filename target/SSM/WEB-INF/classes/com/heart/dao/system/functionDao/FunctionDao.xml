<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.heart.dao.system.functionDao.FunctionDao">

    <select id="loadFunctionById" resultType="com.heart.dto.system.function.FunctionDto">
        SELECT f.functionid,f.functionname,f.url,f.groupid,f.functiondesc,f.icon FROM function_t as f WHERE f.functionid = #{functionid}
    </select>

    <select id="loadFunctionList" resultType="com.heart.dto.system.function.FunctionDto">
        SELECT f.functionid,f.functionname,f.url,f.groupid,f.functiondesc,f.icon FROM function_t as f
    </select>

    <select id="loadFunctionByRole" resultType="com.heart.dto.system.function.FunctionDto">
        SELECT f.functionid,f.functionname,f.url,f.groupid,f.functiondesc,f.icon FROM function_t as f,role_function_t as r
            WHERE f.functionid=r.functionid and r.roleid = #{roleid}
    </select>

    <select id="loaadFunctionGroupById" resultType="com.heart.dto.system.function.FunctionGroupDto">
        SELECT fg.groupid,fg.groupname,fg.groupdesc FROM function_group_t,fg.icon as fg WHERE fg.groupid = #{groupid}
    </select>

    <select id="loaadFunctionGroupByRole" resultType="com.heart.dto.system.function.FunctionGroupDto">
        SELECT  DISTINCT  fg.groupid,fg.groupname,fg.groupdesc,fg.icon FROM function_group_t as fg ,role_function_t as rf,function_t as f
            WHERE fg.groupid=f.groupid and f.functionid=rf.functionid and rf.roleid = #{roleid}
    </select>

    <select id="loaadFunctionGroupList" resultType="com.heart.dto.system.function.FunctionGroupDto">
        SELECT fg.groupid,fg.groupname,fg.groupdesc,fg.icon FROM function_group_t as fg
    </select>

    <insert id="addFunction" parameterType="com.heart.dto.system.function.FunctionDto">
        INSERT INTO function_t(functionid,functionname,url,groupid,functiondesc) values(#{functionid},#{functionname},#{url},#{groupid},#{functiondesc})
    </insert>

    <delete id="deleteFunctionById">
        DELETE FROM function_t as f WHERE f.functionid = #{functionid}
    </delete>

    <update id="updateFunction" parameterType="com.heart.dto.system.function.FunctionDto">
        UPDATE function_t set functionname = #{functionname},url = #{url},groupid = {groupid},functiondesc = #{functiondesc}
            WHERE functionid = #{functionid}
    </update>

</mapper>